<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>70.输入URL到页面渲染完成发生了什么</title>
</head>

<body>
</body>
<script>
    /**
        1. DNS 解析：将域名解析为 IP地址
            - 浏览器DNS缓存
            - 系统DNS缓存
            - 路由器DNS缓存
            - 网络运营商DNS缓存
            - 递归搜索：
                - .com 根域名DNS服务器查找
                - baidu 顶级域名DNS服务器查找
                - www 权威域名DNS服务器查找

        2. TCP连接：TCP三次握手
            - 第一次握手：由浏览器发起，告诉服务器我要发送请求了
            - 第二次握手：由服务器发起，告诉浏览器我准备接受了，你赶紧发送吧
            - 第三次握手：由浏览器发起，告诉服务器，我要马上就发了，准备接受吧

        3. 发送请求：
            - 请求报文：HTTP协议的通信内容

        4. 接受响应
            - 响应报文

        5. 渲染页面
            - 遇见 HTML 标记，浏览器调用 HTML 解析器解析成 Token 并构建成 DOM 树
            - 遇见 style/link 标记，浏览器调用 css 解析器，处理 css 标记并创建 cssom 树
            - 遇见 script 标记，调用 javascript 解析器，处理 script 代码（绑定事件，修改 DOM 树/ cssom 树）
            - 将 DOM 树和 cssom 树合并成一个渲染树
            - 根据渲染树来计算布局，计算每个节点的几何信息（布局）
            - 将各个节点颜色绘制到屏幕上（渲染）
            注意：这些步骤不一定按照顺序执行，如果 DOM 树或者 cssom 树被修改了，可能会执行多次布局和渲染

        6. 断开连接：TCP的四次挥手
            - 第一次挥手：由浏览器发起的，发送给服务器，我东西（请求报文）发送完了，你准备关闭吧
            - 第二次挥手：由服务器发起的，告诉浏览器，我东西（请求报文）接受完了，我准备关闭了，你也准备吧
            - 第三次挥手：由服务器发起的，告诉浏览器，我东西（响应报文）发送完了，你准备关闭吧
            - 第四次挥手：由浏览器发起的，告诉浏览器，我东西（响应报文）接受完了，你也准备吧
            注意：服务器收到第四次挥手后，关闭连接，然后到浏览器关闭连接
    */
</script>


</html>