<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>8.一道面试题让你彻底掌握JS中的EventLoop（头条）</title>
	</head>

	<body>
		<script type="text/javascript">
			// 栈内存内执行完后，寻找任务队列中的任务放回到栈内存中执行，执行完又找任务队列中任务放回栈内存执行，这个过程就叫EventLoop，事件循环
			// 浏览器是多线程，但是Js是单线程的，浏览器只给了JS一个线程，那就是栈内存
			// EventQueue，任务队列，又分微任务和宏任务，先执行栈内，然后微任务，最后宏任务
			async function async1() {
				console.log('async1 start')//2
				// await 创建的任务为微任务，await用于创建异步任务等待有结果再执行下面的代码
				await async2();
				console.log('async1 end')//6
			}
			async function async2() {
				console.log('async2')//3
			}
			
			console.log('script start') //1

			// 定时器任务、事件绑定和ajax为宏任务
			setTimeout(function() {
				console.log('setTimeout')//8
			}, 0)

			async1();

			// new Promise是一个栈内存同步任务，返回的resolve/reject为微任务
			new Promise(function(resolve) {
				console.log('promise1')//4
				resolve()
			}).then(function() {
				console.log('promise2')//7
			})

			console.log('script end')//5
		</script>
	</body>

</html>
