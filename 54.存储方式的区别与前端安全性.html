<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>54.存储方式的区别与前端安全性</title>
</head>

<body>
	<script type="text/javascript">
		/*
		cookie、localStorage和session的区别：
		1. cookie：
			原本设计是为了浏览器和服务器的通信，并不是为了做本地存储
			cookie存储格式：key=value;key2=value2，可以通过key进行重新赋值，如：原cookie='a=100;b=200'，执行document.cookie="a=300"，cookie值被改为"a=300;b=200"
			缺点：
				每次发送请求都会带上cookie，降低访问性能，增加请求数据量
				有大小限制（4K）
				清除浏览器历史信息时会被清除
				API不容易用
				不能跨域发送
		2. localStorage：
			本地存储方案，长期存储，由于是永久存储需要再设置一个存储时间，获取时对比存储时间，超过多久就从服务器重新获取，不会跟随请求发送
			缺点：
				大小限制：5M（按域名为单位计算，每个域名5M），明文存储
		3. sessionStorage：
			HTML5的sessionStorage：和localStorage一样是Web Storage的一种存储方式，是用来存储客户端临时信息的对象。
			缺点：
				只存在于当前会话，浏览器关闭则清空
			
			HTML4的session：当服务器收到session请求时首先会检查客户端请求中是否包含sessionid。如果有sessionid，服务器将根据该id返回对应session对象。
			如果客户端请求中没有sessionid，服务器会创建新的session对象，并把sessionid在本次响应中返回给客户端。通常使用cookie方式存储sessionid到
			客户端，在交互中浏览器按照规则将sessionid发送给服务器。

				

		将token（身份认证凭证）存放在webStorage（sessionStorage和localStorage）中，可以通过同域的JS来访问，这样会导致很容易受到XSS攻击，特别是项目中
		引入很多的第三方js类库的情况下，如果js脚本被盗用，攻击者就可以轻易访问你的网站，webStorage作为一种存储机制，在传输过程中不会执行任何安全标准

		将token存放在cookie中可以指定httponly，来防止被JS读取，也可以指定secure，来保证token只在HTTPS下传输，缺点是不符合restful最佳实践，容易受到CSRF攻击

		XSS攻击：cross-site Scripting（跨站脚本攻击）是一种注入代码攻击，恶意攻击者在目标网站上注入script代码，当访问者浏览网站的时候通过执行注入的script代码达到窃取用户信息，盗用用户身份等

		CSRF攻击：cross-site Request Forgery（跨站点请求伪造），跟XSS攻击一样，存在巨大的危害性，简单来说就是恶意攻击者盗用已经认证过的用户信息，以用户的名义进行一些
		操作（如发邮件，转账，购买商品等等），由于身份已经认证过，所以目标网站会认为操作都是真正的用户操作，CSRF并不能拿到用户信息，它只是盗用了用户的登录凭证去进行操作
		*/
	</script>
</body>

</html>